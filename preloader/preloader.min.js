!function(){return function t(e,r,n){function s(i,u){if(!r[i]){if(!e[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(o)return o(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var f=r[i]={exports:{}};e[i][0].call(f.exports,function(t){var r=e[i][1][t];return s(r||t)},f,f.exports,t,e,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}}()({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./utils/getAtrribute"),s=t("./utils/match-all"),o=[{regex:/<img [^>]+>/g,attribute:"src"},{regex:/<link [^>]+>/g,attribute:"href"},{regex:/<script(?:\s+[^>]*)?>(.*?)<\/script\s*>/g,attribute:"src"}];r.extractor=function(t){var e=[];return o.forEach(function(r){return e=e.concat(s.matchAll(r.regex,t).map(function(t){return n.getAttribute(t[0],r.attribute)}))}),e.filter(function(t){return Boolean(t)})}},{"./utils/getAtrribute":2,"./utils/match-all":3}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAttribute=function(t,e){var r=t.split(e+"=");if(r.length>1)return r[1].split('"')[1]}},{}],3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.matchAll=function(t,e){for(var r,n=[];null!==(r=t.exec(e));)r.index===t.lastIndex&&t.lastIndex++,n.push(r);return n}},{}],4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./preload/preload");"undefined"!=typeof window&&(window.Preloader=n.Preloader)},{"./preload/preload":5}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../extractor/extractor"),s=t("../utils/array"),o=t("../request/request"),i=t("../utils/get-url-type"),u=t("../utils/get-url-suffix"),c=function(){function t(t,e,r){this.completed=[],this.urls=[],this.failed=[],this.reminds=[],this.maxRequestAmount=3,this.currentRequestAmount=0,this.addURLs(t),this.onLoad=e,this.onCompleted=r}return t.prototype.addURLs=function(t){return t&&(this.urls=this.urls.concat(t),this.reminds=this.reminds.concat(t)),this},t.prototype.start=function(){this.fetchNextURL()},t.prototype.onResourceLoad=function(t){var e=t.currentTarget,r=this.getCloneStatus(e);r.isSucceed?(s.addElement(e.responseURL,this.completed),s.removeElement(e.responseURL,this.failed)):s.addElement(e.responseURL,this.failed),"function"==typeof this.onLoad&&this.onLoad(r),this.currentRequestAmount--,this.fetchNextURL(),this.completed.length+this.failed.length===this.urls.length&&"function"==typeof this.onCompleted&&this.onCompleted()},t.prototype.fetchNextURL=function(){if(this.maxRequestAmount>this.currentRequestAmount&&this.reminds.length){var t=this.reminds.shift();t&&(this.currentRequestAmount++,this.fetchNextURL(),o.Request.of(t).set("responseType",i.getURLType(t)).on("onload",this.onResourceLoad.bind(this)).on("onprogress",this.onProgress).on("onerror",function(t){return console.log(t)}).done())}},t.prototype.getCloneStatus=function(t){return{urls:this.urls.slice(0),completed:this.completed.slice(0),failed:this.failed.slice(0),reminds:this.reminds.slice(0),request:t,isSucceed:t.status<400,responseText:"text"===t.responseType?t.responseText:void 0,suffix:u.getURLSuffix(t.responseURL)}},t.extractor=n.extractor,t}();r.Preloader=c},{"../extractor/extractor":1,"../request/request":6,"../utils/array":7,"../utils/get-url-suffix":8,"../utils/get-url-type":9}],6:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../utils/object"),s=function(){function t(t,e){void 0===e&&(e="get"),this.headers={},this.event={},this.attribute={},this.request=new XMLHttpRequest,this.open(t,e)}return t.prototype.open=function(t,e){return void 0===e&&(e="get"),this.url=t,this.method=e,this},t.prototype.set=function(t,e){return this.attribute[t]=e,this},t.prototype.on=function(t,e){return this.event[t]=e,this},t.prototype.setHeaders=function(t){return t&&n.migrate(t,this.headers,!0),this},t.prototype.done=function(){this.request.open(this.method,this.url),this._setAttribute(),this._setHeaders(),this._setEvent(),this.request.send()},t.prototype._setAttribute=function(){n.migrate(this.attribute,this.request,!0)},t.prototype._setHeaders=function(){var t=this;this.headers&&Object.keys(this.headers).forEach(function(e){return t.request.setRequestHeader(e,t.headers[e])})},t.prototype._setEvent=function(){var t=this,e=function(e){return function(r){t.event.hasOwnProperty(e)&&"function"==typeof t.event[e]&&t.event[e](r)}};this.request.onload=e("onload"),this.request.onerror=e("onerror"),this.request.onloadend=e("onloadend"),this.request.onloadstart=e("onloadstart"),this.request.onprogress=e("onprogress"),this.request.ontimeout=e("ontimeout"),this.request.onreadystatechange=e("onreadystatechange")},t.of=function(e,r){return new t(e,r)},t}();r.Request=s},{"../utils/object":10}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addElement=function(t,e){-1===e.indexOf(t)&&e.push(t)},r.removeElement=function(t,e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},{}],8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getURLSuffix=function(t){var e=t.split(".");return e.length?e.slice(-1)[0].toLowerCase():""}},{}],9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./get-url-suffix"),s=[{name:"text",suffix:["html","css","js"]}];r.getURLType=function(t){for(var e=n.getURLSuffix(t),r=0,o=s;r<o.length;r++){var i=o[r];if(-1!==i.suffix.indexOf(e)&&i.name)return i.name}return"blob"}},{"./get-url-suffix":8}],10:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=!0);for(var s=0,o=Object.keys(t);s<o.length;s++){var i=o[s],u=typeof t[i];"object"===u&&t[i]&&(e.hasOwnProperty(i)||(e[i]={}),!n||"object"==typeof e[i]&&e[i]?r.migrate(t[i],e[i],n):e[i]={}),"object"===u&&t[i]||e.hasOwnProperty(i)&&!n||(e[i]=t[i])}},r.copy=function(t){var e={};return r.migrate(t,e),e}},{}]},{},[4]);